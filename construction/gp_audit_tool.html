<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gross Profit / Markup Sales Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10px;
            padding: 30px; /* Increased padding for larger frame */
            border: 4px solid #333; /* Increased border width for larger frame */
            box-sizing: border-box;
            max-width: 1000px; /* Optional: limit max width for desktop */
            margin-left: auto;
            margin-right: auto;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        h1 {
            font-size: 28px;
            margin: 0;
        }
        .header-button {
            background-color: #4CAF50; /* Green background */
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .header-button:hover {
            background-color: #45a049; /* Darker green on hover */
        }
        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 100%;
            margin-bottom: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 14px;
        }
        th {
            background-color: #f2f2f2;
        }
        input {
            width: 100%;
            border: none;
            padding: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .target-gp {
            width: 100%; /* Full width on mobile */
            max-width: 150px; /* Limit max width for aesthetics */
            background-color: #90ee90;
            margin-bottom: 10px;
        }
        .total {
            font-weight: bold;
            background-color: #e6e6e6;
        }
        .blended-gp {
            margin-top: 15px;
            font-weight: bold;
            font-size: 16px;
        }
        .footer-text {
            margin-top: 15px;
            font-size: 14px;
            line-height: 1.5;
            color: #333;
            max-width: 100%;
            text-align: left;
        }
        .link-section {
            margin-top: 15px;
            font-size: 14px;
            color: #333;
            max-width: 100%;
            text-align: left;
        }
        .link-wrapper {
            display: flex;
            gap: 10px; /* Space between links */
            align-items: flex-start;
        }
        .link-item {
            display: inline-block;
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            body {
                margin: 5px;
                padding: 10px; /* Reduced padding on mobile */
                border: none; /* Remove border on mobile */
                max-width: 100%; /* Full width on mobile */
            }
            .header-container {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            h1 {
                font-size: 24px;
                margin-bottom: 10px;
            }
            .header-button {
                width: 100%;
                margin-top: 10px;
                font-size: 14px;
                padding: 8px 16px;
            }
            table {
                font-size: 12px;
                padding: 5px;
            }
            th, td {
                padding: 6px;
            }
            input {
                font-size: 14px;
                padding: 6px;
            }
            .target-gp {
                max-width: 120px;
            }
            .blended-gp {
                font-size: 14px;
            }
            .footer-text {
                font-size: 12px;
            }
            .link-wrapper {
                flex-direction: column; /* Stack links vertically on mobile */
                gap: 20px;
            }
            .link-item {
                width: 100%;
                text-align: center;
            }
            img {
                width: 100%;
                max-width: 230px;
                height: auto; /* Maintain aspect ratio */
            }
            a {
                font-size: 14px;
                padding: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="header-container">
        <h1>Gross Profit / Markup Sales Calculator</h1>
        <a href="https://ikegilbert.github.io/public/construction/index.html" class="header-button">ConstructionGods.com</a>
    </div>
    <label for="target-gp">Enter Target GP%:</label>
    <input type="number" id="target-gp" class="target-gp" step="0.01" placeholder="Enter Target GP%" oninput="updateGMInputs()">
    <br>
    <a href="https://ikegilbert.github.io/public/construction/gp_audit.instructions.html" target="_blank" onclick="window.open(this.href, 'popup', 'width=90vw,height=80vh'); return false;">Instructions</a>
    <br><br>

    <!-- Cost Table -->
    <table id="cost-table">
        <thead>
            <tr>
                <th>COST</th>
                <th>GM %</th>
                <th>SELL</th>
                <th>MARKUP</th>
                <th>MU%</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="number" class="cost" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="gm" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="sell" step="0.01" oninput="calculateRow(this)"></td>
                <td class="markup"></td>
                <td class="mu-percent"></td>
            </tr>
            <tr>
                <td><input type="number" class="cost" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="gm" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="sell" step="0.01" oninput="calculateRow(this)"></td>
                <td class="markup"></td>
                <td class="mu-percent"></td>
            </tr>
            <tr>
                <td><input type="number" class="cost" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="gm" step="0.01" oninput="calculateRow(this)"></td>
                <td><input type="number" class="sell" step="0.01" oninput="calculateRow(this)"></td>
                <td class="markup"></td>
                <td class="mu-percent"></td>
            </tr>
            <tr class="total">
                <td id="total-cost">0</td>
                <td></td>
                <td id="total-sell">0</td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <br><br>

    <!-- Sell Table -->
    <table id="sell-table">
        <thead>
            <tr>
                <th>SELL</th>
                <th>COST</th>
                <th>MARKUP</th>
                <th>PROFIT GROSS</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="number" class="sell2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td><input type="number" class="cost2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td class="markup2"></td>
                <td class="profit-gross"></td>
            </tr>
            <tr>
                <td><input type="number" class="sell2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td><input type="number" class="cost2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td class="markup2"></td>
                <td class="profit-gross"></td>
            </tr>
            <tr>
                <td><input type="number" class="sell2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td><input type="number" class="cost2" step="0.01" oninput="calculateSellRow(this)"></td>
                <td class="markup2"></td>
                <td class="profit-gross"></td>
            </tr>
            <tr class="total">
                <td id="total-sell2">0</td>
                <td id="total-cost2">0</td>
                <td></td>
                <td id="total-profit-gross">0</td>
            </tr>
        </tbody>
    </table>

    <div class="blended-gp">
        BLENDED GP%: <span id="blended-gp">0</span>
    </div>

    <div class="footer-text">
        This online tool is designed to help small businesses and contractors determine the appropriate markup to resell goods and services. In order to calculate the markup needed to achieve the desired profits, simply enter the data starting in the top tool "Target Gross Profit %" box, then indicate the cost of the item or service so that the tool can calculate your markup amount and markup percentage.
        <br><br>
        The bottom tool allows you to enter the cost and sell prices for multiple items and then provides the markup information and blends the gross profit for up to 3 different goods or services sold together.
    </div>

    <div class="link-section">
        #affiliate_links
        <br>
        <strong>Recommended Contractor and Sales Books</strong>
        <br><br>
        <div class="link-wrapper">
            <div class="link-item">
                <a href="https://amzn.to/4782vcG" target="_blank"><img src="https://m.media-amazon.com/images/I/81SlKoEVDKL._SY385_.jpg" alt="Consultant & Independent Contractor Agreements Book" style="width: 230px; height: 230px;"></a>
            </div>
            <div class="link-item">
                <a href="https://amzn.to/46CbDGs" target="_blank"><img src="https://m.media-amazon.com/images/I/61qGoD42onL._SY385_.jpg" alt="Profitable Sales, A Contractor's Guide Book" style="width: 230px; height: 230px;"></a>
            </div>
            <div class="link-item">
                <a href="https://amzn.to/40JkySO" target="_blank"><img src="https://m.media-amazon.com/images/I/619rW30yK0L._SY466_.jpg" alt="The Contractor Profit Blueprint Book" style="width: 230px; height: 230px;"></a>
            </div>
        </div>
    </div>

    <script>
        function updateGMInputs() {
            const targetGP = parseFloat(document.getElementById('target-gp').value) || 0;
            document.querySelectorAll('#cost-table .gm').forEach(gmInput => {
                gmInput.value = targetGP.toFixed(2);
                calculateRow(gmInput);
            });
        }

        function calculateRow(element) {
            const row = element.parentElement.parentElement;
            const costInput = row.querySelector('.cost');
            const gmInput = row.querySelector('.gm');
            const sellInput = row.querySelector('.sell');
            const markupCell = row.querySelector('.markup');
            const muPercentCell = row.querySelector('.mu-percent');

            let cost = parseFloat(costInput.value) || 0;
            let gm = parseFloat(gmInput.value) || 0;
            let sell = parseFloat(sellInput.value) || 0;

            if (element.classList.contains('cost') && cost !== 0) {
                // Calculate SELL from COST and GM%
                sell = cost / (1 - gm / 100);
                sellInput.value = sell.toFixed(2);
            } else if (element.classList.contains('gm') && gm !== 0) {
                // Calculate SELL from COST and GM%
                sell = cost / (1 - gm / 100);
                sellInput.value = sell.toFixed(2);
            } else if (element.classList.contains('sell') && sell !== 0) {
                // Calculate GM% from COST and SELL
                gm = ((sell - cost) / sell) * 100;
                gmInput.value = gm.toFixed(2);
            }

            // Calculate MARKUP and MU%
            const markup = sell - cost;
            const muPercent = cost !== 0 ? (markup / cost) * 100 : 0;

            markupCell.textContent = markup.toFixed(2);
            muPercentCell.textContent = muPercent.toFixed(2) + '%';

            calculateTotals();
        }

        function calculateSellRow(element) {
            const row = element.parentElement.parentElement;
            const sellInput = row.querySelector('.sell2');
            const costInput = row.querySelector('.cost2');
            const markupCell = row.querySelector('.markup2');
            const profitGrossCell = row.querySelector('.profit-gross');

            let sell = parseFloat(sellInput.value) || 0;
            let cost = parseFloat(costInput.value) || 0;

            // Calculate MARKUP
            const markup = sell - cost;
            markupCell.textContent = markup.toFixed(2);

            // Calculate PROFIT GROSS (GM%)
            const profitGross = sell !== 0 ? (sell - cost) / sell : 0;
            profitGrossCell.textContent = profitGross.toFixed(6);

            calculateSellTotals();
        }

        function calculateTotals() {
            let totalCost = 0;
            let totalSell = 0;

            document.querySelectorAll('#cost-table .cost').forEach(input => {
                totalCost += parseFloat(input.value) || 0;
            });
            document.querySelectorAll('#cost-table .sell').forEach(input => {
                totalSell += parseFloat(input.value) || 0;
            });

            document.getElementById('total-cost').textContent = totalCost.toFixed(2);
            document.getElementById('total-sell').textContent = totalSell.toFixed(2);

            calculateBlendedGP();
        }

        function calculateSellTotals() {
            let totalSell = 0;
            let totalCost = 0;
            let totalProfitGross = 0;

            document.querySelectorAll('#sell-table .sell2').forEach(input => {
                totalSell += parseFloat(input.value) || 0;
            });
            document.querySelectorAll('#sell-table .cost2').forEach(input => {
                totalCost += parseFloat(input.value) || 0;
            });

            totalProfitGross = totalSell !== 0 ? (totalSell - totalCost) / totalSell : 0;

            document.getElementById('total-sell2').textContent = totalSell.toFixed(2);
            document.getElementById('total-cost2').textContent = totalCost.toFixed(2);
            document.getElementById('total-profit-gross').textContent = totalProfitGross.toFixed(6);

            calculateBlendedGP();
        }

        function calculateBlendedGP() {
            const totalSell = parseFloat(document.getElementById('total-sell2').textContent) || 0;
            const totalCost = parseFloat(document.getElementById('total-cost2').textContent) || 0;
            const blendedGP = totalSell !== 0 ? ((totalSell - totalCost) / totalSell) : 0;
            document.getElementById('blended-gp').textContent = blendedGP.toFixed(6);
        }
    </script>
</body>
</html>
